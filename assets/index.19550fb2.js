import{d as t,a as e,c as n,b as s,t as a,u as o,o as i,w as c,e as r,f as d}from"./vendor.1a91f601.js";const l=t({id:"counter",state:()=>({count:0}),actions:{increment(){this.count++},decrement(){this.count&&this.count--}}}),u={class:"counter"},m=["textContent"],p={class:"button__wrapper"};const v=r(e({setup(t){const e=l();return(t,c)=>(i(),n("div",u,[s("h1",{class:"count",textContent:a(o(e).count)},null,8,m),s("div",p,[s("button",{onClick:c[0]||(c[0]=(...t)=>o(e).decrement&&o(e).decrement(...t))},"-"),s("button",{onClick:c[1]||(c[1]=(...t)=>o(e).increment&&o(e).increment(...t))},"+")])]))}})),h=d();h.use((({initialize:t=!0}={})=>({store:e,options:n})=>{var s,a;if(!("BroadcastChannel"in window))return void console.error("BroadcastChannel API is not supported in this device.");const o=null!=(a=null==(s=null==n?void 0:n.share)?void 0:s.omit)?a:[];Object.keys(e.$state).forEach((s=>{var a,i,r,d;!o.includes(s)&&(r=s,d=e.$state,Object.keys(d).includes(r))&&function(t,e,{initialize:n}){const s=`shared-${e.$id}-${t.toString()}`;let a=new BroadcastChannel(s),o=!1,i=0;c((()=>e[t]),(t=>{o||(i=Date.now(),a.postMessage({timestamp:i,state:t})),o=!1}),{deep:!0}),a.onmessage=n=>{void 0!==n.data?n.data.timestamp<=i||(o=!0,i=n.data.timestamp,e[t]=n.data.state):a.postMessage({timestamp:i,state:e[t]})};const r=()=>a.postMessage(void 0);n&&r()}(s,e,{initialize:null!=(i=null==(a=null==n?void 0:n.share)?void 0:a.initialize)?i:t})}))})()),v.use(h),v.mount("#app");
