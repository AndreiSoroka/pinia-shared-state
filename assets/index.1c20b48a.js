import{d as t,a as e,c as n,b as s,t as a,u as o,o as i,w as l,e as c,f as r}from"./vendor.1a91f601.js";const d=t({id:"counter",state:()=>({count:0}),actions:{increment(){this.count++},decrement(){this.count&&this.count--}},share:{enable:!0}}),u={class:"counter"},m=["textContent"],p={class:"button__wrapper"};const v=c(e({setup(t){const e=d();return(t,l)=>(i(),n("div",u,[s("h1",{class:"count",textContent:a(o(e).count)},null,8,m),s("div",p,[s("button",{onClick:l[0]||(l[0]=(...t)=>o(e).decrement&&o(e).decrement(...t))},"-"),s("button",{onClick:l[1]||(l[1]=(...t)=>o(e).increment&&o(e).increment(...t))},"+")])]))}})),h=r();h.use((({initialize:t=!0,enable:e=!0}={})=>({store:n,options:s})=>{var a,o,i,c;if(!("BroadcastChannel"in window))return void console.error("BroadcastChannel API is not supported in this device.");const r=null!=(o=null==(a=null==s?void 0:s.share)?void 0:a.enable)?o:e,d=null!=(c=null==(i=null==s?void 0:s.share)?void 0:i.omit)?c:[];r&&Object.keys(n.$state).forEach((e=>{var a,o,i,c;!d.includes(e)&&(i=e,c=n.$state,Object.keys(c).includes(i))&&function(t,e,{initialize:n}){const s=`shared-${e.$id}-${t.toString()}`;let a=new BroadcastChannel(s),o=!1,i=0;l((()=>e[t]),(t=>{o||(i=Date.now(),a.postMessage({timestamp:i,state:t})),o=!1}),{deep:!0}),a.onmessage=n=>{void 0!==n.data?n.data.timestamp<=i||(o=!0,i=n.data.timestamp,e[t]=n.data.state):a.postMessage({timestamp:i,state:e[t]})};const c=()=>a.postMessage(void 0);n&&c()}(e,n,{initialize:null!=(o=null==(a=null==s?void 0:s.share)?void 0:a.initialize)?o:t})}))})({enable:!1})),v.use(h),v.mount("#app");
