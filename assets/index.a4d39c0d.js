import{d as t,a as e,c as n,b as s,t as a,u as o,o as i,B as l,w as c,e as u,f as r}from"./vendor.afd92a1a.js";const d=t({id:"counter",state:()=>({count:0}),actions:{increment(){this.count++},decrement(){this.count&&this.count--}},share:{enable:!0}}),m={class:"counter"},p=["textContent"],v={class:"button__wrapper"};const b=u(e({setup(t){const e=d();return(t,l)=>(i(),n("div",m,[s("h1",{class:"count",textContent:a(o(e).count)},null,8,p),s("div",v,[s("button",{onClick:l[0]||(l[0]=(...t)=>o(e).decrement&&o(e).decrement(...t))},"-"),s("button",{onClick:l[1]||(l[1]=(...t)=>o(e).increment&&o(e).increment(...t))},"+")])]))}})),h=r();h.use((({initialize:t=!0,enable:e=!0}={})=>({store:n,options:s})=>{var a,o,i,u;const r=null!=(o=null==(a=null==s?void 0:s.share)?void 0:a.enable)?o:e,d=null!=(u=null==(i=null==s?void 0:s.share)?void 0:i.omit)?u:[];r&&Object.keys(n.$state).forEach((e=>{var a,o,i,u;!d.includes(e)&&(i=e,u=n.$state,Object.keys(u).includes(i))&&function(t,e,{initialize:n}){const s=`${e.$id}-${t.toString()}`,a=new l(s,{type:"localstorage"});let o=!1,i=0;c((()=>e[t]),(t=>{o||(i=Date.now(),a.postMessage({timestamp:i,state:t})),o=!1}),{deep:!0}),a.onmessage=n=>{void 0!==n?n.timestamp<=i||(o=!0,i=n.timestamp,e[t]=n.state):a.postMessage({timestamp:i,state:e[t]})};const u=()=>a.postMessage(void 0);n&&u()}(e,n,{initialize:null!=(o=null==(a=null==s?void 0:s.share)?void 0:a.initialize)?o:t})}))})({enable:!1})),b.use(h),b.mount("#app");
